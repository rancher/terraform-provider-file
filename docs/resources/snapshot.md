---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "file_snapshot Resource - file"
subcategory: ""
description: |-
  File Snapshot resource.
  This resource saves some content in state and doesn't update it until the trigger argument changes. Importantly, this resource ignores changes in the configuration for the contents argument.The refresh phase doesn't update state, instead the state can only change on create or update and only when the update_trigger argument changes.
---

# file_snapshot (Resource)

File Snapshot resource. 
This resource saves some content in state and doesn't update it until the trigger argument changes. Importantly, this resource ignores changes in the configuration for the contents argument.The refresh phase doesn't update state, instead the state can only change on create or update and only when the update_trigger argument changes.

## Example Usage

```terraform
resource "file_snapshot" "basic_example" {
  contents       = "An example implementation, saving contents to state."
  update_trigger = "an arbitrary string"
}


# A more advanced use case:
# We use a terraform_data resource to write a file
#   then we create a snapshot of the file using file_snapshot
#   then we update the file using a terraform_data resource
#   then we get the contents of the file using a file_local resource
#   then we output both the file_local and file_snapshot, observing that they are different
resource "file_local" "snapshot_file_example" {
  name     = "snapshot_resource_test.txt"
  contents = "this is an example file that is used to show how snapshots work"
}
resource "file_snapshot" "file_example" {
  depends_on = [
    file_local.snapshot_file_example,
  ]
  contents       = file_local.snapshot_file_example.contents
  update_trigger = "code-change-necessary"
}
resource "terraform_data" "update_file" {
  depends_on = [
    file_local.snapshot_file_example,
    file_snapshot.file_example,
  ]
  provisioner "local-exec" {
    command = <<-EOT
      printf 'this updates a file that is used to show how snapshots work' > snapshot_resource_test.txt
    EOT
  }
}
data "file_local" "snapshot_file_example_after_update" {
  depends_on = [
    file_local.snapshot_file_example,
    file_snapshot.file_example,
    terraform_data.update_file,
  ]
  name      = "snapshot_resource_test.txt"
  directory = "."
}

output "file" {
  value = data.file_local.snapshot_file_example_after_update.contents
  # this updates a file that is used to show how snapshots work
}
output "snapshot" {
  value = file_snapshot.file_example.contents
  # this is an example file that is used to show how snapshots work
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `contents` (String) Contents to save. While this argument is exposed, you shouldn't use its output. Instead use the snapshot attribute to get the data saved in the snapshot.
- `update_trigger` (String) When this argument changes the snapshot will be updated to whatever is in the contents.

### Read-Only

- `id` (String) Unique identifier for the resource. The SHA256 hash of the base64 encoded contents.
- `snapshot` (String) Saved contents. This will match the contents during create and whenever the update_trigger changes.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# IDENTIFIER="$(echo -n "these contents are the default for testing" | base64 -w 0 | sha256sum | awk '{print $1}')"

terraform import file_snapshot.example "IDENTIFIER"

# after this is run you will need to refine the resource more by defining the contents and update_trigger
# admittedly, it doesn't make a lot of sense to import a snapshot since there isn't anything to reconcile
```
